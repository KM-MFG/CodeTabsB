!function(e){window.csPLUGIN||(window.csPLUGIN={}),csPLUGIN.SLIDESHOW={init:function(){this.cs.num>1&&(this.is.hoverAction=0,this.focus(),this.M.scroll.setup(),this.hover(),this.o.slideshow.isPlayPause&&this.toggle(),this.is.stop=0,this.go())},go:function(){var e=this,s=e.is;s.stop||(s.pauseActive?e.pause():!s.focus||!s.into||s.hover||e.va.nVideoOpen||e.va.nMapOpen||!e.o.slideshow.isHoverPause&&s.fxRun?s.playing&&e.pause():s.fxRun||(s.hoverAction?e.reset():e.play()))},update:function(){var s=this.oo,i=this.o,t=this.va,o=this.is,a=this.ti,r=e.extend({},csPLUGIN.TIMER,this),c=s.slideshow,n=i.slideshow;if(c.timer!=n.timer&&(clearInterval(a.timer),this.RENDER.timer(),!!t.tTimer0&&this.pause(),this.play()),o.timer&&"arc"==t.timer&&!!csPLUGIN.TIMER&&r.arcProp(),s.isSlideshow!=i.isSlideshow)if(i.isSlideshow)this.init();else{this.pause(1);var u=" focus.code"+t.codekey+" blur.code"+t.codekey+" scroll.code"+t.codekey;e(window).off(u),t.$cs.off("mouseenter.code mouseleave.code")}c.isHoverPause!=n.isHoverPause&&this.hover()},play:function(){var s=this,i=s.va,t=s.is,o=s.ti,a=s.cs,r=s.o,c=e.extend({},csPLUGIN.TIMER,s),n=function(){clearTimeout(o.play),o.play=setTimeout(function(){s.reset()},i.speed[a.idCur]-10)};t.playing=1,i.tTimer0=+new Date,t.timer&&!!csPLUGIN.TIMER&&c[i.timer+"Update"](),clearTimeout(o.play),o.play=setTimeout(function(){var e=a.num,t=r.slideshow.isRandom&&e>2,o="dash"==r.layout?s.ds.nEnd:a.idCur,c=t?s.M.raExcept(0,e-1,o):o>=e-1?0:o+1,u=i.$s.eq(c);u.data("is").loaded?(t?s.SLIDETO.run(c,1):r.isLoop||o!=e-1?s.EVENTS.next(1):s.SLIDETO.run(0,1),n()):(u.data({isPlayNext:1}),a.stop())},i.tDelay)},reset:function(){var e=this.va;e.tDelay!=e.delay[this.cs.idCur]&&(e.tDelay=e.delay[this.cs.idCur]),"bar"==e.timer&&100!=e.xTimer?e.xTimer=100:"number"==e.timer&&0!=e.xTimer?e.xTimer=0:"arc"==e.timer&&(e.arc.angCur=0),this.play()},pause:function(s){var i=this,t=i.va,o=i.is,a=i.cs.idCur,r=!!csPLUGIN.TIMER,c=e.extend({},csPLUGIN.TIMER,i);if(o.playing=0,o.hoverAction=0,s)t.tDelay=t.delay[a],r&&c[t.timer+"Setup"];else{var n=t.tDelay;t.tTimer1=+new Date,t.tDelay=t.delay[a]-(t.tTimer1-t.tTimer0),t.delay[a]!=n&&(t.tDelay-=t.delay[a]-n),t.tDelay<0&&(t.tDelay=0,o.hoverAction=1)}this.stop(),clearTimeout(i.ti.play)},stop:function(){var e=this.va,s=this.ti;switch(e.timer){case"bar":e.xTimer=e.tDelay/e.delay[this.cs.idCur]*100;var i={};i[e.cssTf]=this.M.tlx(-e.xTimer,"%"),this.is.ts?e.$timerItem.css(e.cssD0).css(i):e.$timerItem.stop(!0).css(i);break;case"arc":e.arc.angCur=360-e.tDelay/e.delay[this.cs.idCur]*360,clearInterval(s.timer);break;case"number":clearInterval(s.timer)}},focus:function(){var s=this,i=s.is,t=".code"+s.va.codekey;i.focus=1,e(window).on("focus"+t,function(){i.focus||(i.focus=1,s.go())}).on("blur"+t,function(){i.focus&&(i.focus=0,s.go())})},hover:function(){var e=this,s=e.va.$cs;e.o.slideshow.isHoverPause?(e.is.hover=0,s.off("mouseenter.code mouseleave.code").on("mouseenter.code",function(){e.hover1()}).on("mouseleave.code",function(){e.hover0()})):s.off("mouseenter.code mouseleave.code")},hover0:function(){this.is.hover=0,this.go()},hover1:function(){this.is.hover=1,this.go()},toggle:function(){var e=this,s=e.o,i=e.va,t=s.ns+s.actived,o=i.ev.click;i.$playpause.off(o),i.$playpause.on(o,function(){return i.$playpause.hasClass(t)?(e.is.pauseActive=0,i.$playpause.removeClass(t)):(e.is.pauseActive=1,i.$playpause.addClass(t)),e.go(),!1})}}}(jQuery);